<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>筛选页</title>
<link type="text/css" rel="stylesheet" href="../static/css/reset.css">
<link type="text/css" rel="stylesheet" href="../static/css/main.css">
<!--[if IE 6]>
<script type="text/javascript" src="js/DD_belatedPNG_0.0.8a-min.js"></script>
<script type="text/javascript" src="js/ie6Fixpng.js"></script>
<![endif]-->
<script src="/static/js/jquery.js" type="text/javascript"></script>
</head>

<script type="text/javascript">
function changeUrlArg(arg, val){
	url=document.URL;
    var pattern = arg+'=([^&]*)';
    var replaceText = arg+'='+val;
    return url.match(pattern) ? url.replace(eval('/('+ arg+'=)([^&]*)/gi'), replaceText) : (url.match('[\?]') ? url+'&'+replaceText : url+'?'+replaceText);
}
 
function GetQueryString(arg)
{
    var reg = new RegExp("(^|&)" + arg + "=([^&]*)(&|$)", "i");  
    var l = decodeURI(window.location.search);  
    var r = l.substr(1).match(reg);  
    if (r != null) return unescape(r[2]);  
    return null;  
}
function fiter()
{	
		//kind
		var kinds=new Array("小说","人文","科学","历史","教育","经济","生活","传记","漫画书","电子书","null");
		
		var prices=new Array(0,1,2,3,4,5);
		var t=0;
		var kind=GetQueryString("find");
		for(var i=0;i<kinds.length;i++){
			if(kind==kinds[i]){
			document.getElementById("kind"+i).className='active';
			t++;
			}
			document.getElementById("kind"+i).href=changeUrlArg("find", kinds[i]);
		}
		if(!t) location.href=changeUrlArg("find",null);
		
		
		//price
		var prices=new Array(0,1,2,3,4,5);
		t=0;
		var temp=GetQueryString("price");
		for(var i=0;i<prices.length;i++){
			if(temp==prices[i]){
			document.getElementById("qprice"+i).className='active';
			t++;
			}
			document.getElementById("qprice"+i).href=changeUrlArg("price", prices[i]);
		}
		if(!t) location.href=changeUrlArg("price",0);
		
		//sort
		var sort=new Array(0,1,2,3,4);
		t=0;
		var temp=GetQueryString("sort");
		for(var i=0;i<sort.length;i++){
			if(temp==sort[i]){
			document.getElementById("sort"+i).className='active';
			t++;
			}
			document.getElementById("sort"+i).href=changeUrlArg("sort", sort[i]);
		}
		if(!t) location.href=changeUrlArg("sort",0);
		
		
		//view
		if(GetQueryString("itemid")!=null) document.getElementById("items").value=GetQueryString("itemid");
		if(GetQueryString("page")==null) location.href=changeUrlArg("page", 1);
		//price
		var minprice=0,maxprice=0;
		var price=GetQueryString("price");
		switch(parseInt(price)){
			case 0: minprice=0 ;maxprice=1000000 ;break;
			case 1: minprice=0 ;maxprice=30 ;break;
			case 2: minprice=30 ;maxprice=50 ;break;
			case 3: minprice=50 ;maxprice=100 ;break;
			case 4: minprice=100 ;maxprice=1000 ;break;
			case 5: minprice=1000 ;maxprice=1000000 ;break;
		}
		
		$.ajax({
			type:'GET',
			data:{"itemid":GetQueryString("itemid"),"find":GetQueryString("find"),
			"sort":GetQueryString("sort"),"minprice":minprice,"maxprice":maxprice},
			url:'/ajax/filter',
			<!-- async:false, -->
			dataType:'json',
			success:function (result) {
				alert('1');
			}
		});
		document.getElementById("span0").style.display="none";
		document.getElementById("shopnumber").innerHTML=1;
		
		for(var i=0;i<9;i++)
		{
			document.getElementById("name"+i).innerHTML=i;
			document.getElementById("name"+i).href="shop";
			document.getElementById("author"+i).innerHTML=i;
			document.getElementById("price"+i).innerHTML=i;
			//document.getElementById("box"+i).style.display="none";
			document.getElementById("url"+i).href=changeUrlArg("sort",2);
			document.getElementById("picture"+i).src="../static/images/pad.jpg";
		
		}
		
			
		
}	  
function  search(){
	var item=document.getElementById("items").value;
	location.href=changeUrlArg("itemid",item);	
}
</script>
<body onload="fiter()">

<body>
<div class="headerBar">
	<div class="topBar">
		<div class="comWidth">
			<div class="leftArea">
				<a href="#" class="collection">收藏慕课</a>
			</div>
			<div class="rightArea">
				欢迎来到慕课网！<a href="#">[登录]</a><a href="#">[免费注册]</a>
			</div>
		</div>
	</div>
	<div class="logoBar">
		<div class="comWidth">
			<div class="logo fl">
				<a href="#"><img src="../static/images/logo.jpg" alt="慕课网"></a>
			</div>
			<div class="search_box fl" >
				<input type="text" class="search_text fl" id="items" >
				<input type="button" value="搜 索" class="search_btn fr"  style="cursor:pointer" onclick="search()">
			</div>
			<div class="shopCar fr">
				<span class="shopText fl " >购物车</span>
				<span class="shopNum fl">0</span>
			</div>
		</div>
	</div>
<div class="hr_15"></div>
<div class="comWidth clearfix products">
	<div>
		<div class="screening_box">
			<dl class="screening clearfix">
				<dt>种类</dt>
				<dd class="limit"><a id="kind10">不限</a></dd>
				<dd class="screening_list">
					<ul class="clearfix">
						<li><a id="kind0" >小说</a></li>
						<li><a id="kind1">人文</a></li>
						<li><a id="kind2">科学</a></li>
						<li><a id="kind3">历史</a></li>
						<li><a id="kind4">教育</a></li>
						<li><a id="kind5">经济</a></li>
						<li><a id="kind6">生活</a></li>
						<li><a id="kind7">传记</a></li>
						<li><a id="kind8">漫画书</a></li>
						<li><a id="kind9">电子书</a></li>
					</ul>
				</dd>
			</dl>
			<dl class="screening clearfix">
				<dt>价格</dt>
				<dd class="limit"><a  id="qprice0">不限</a></dd>
				<dd class="screening_list">
					<ul class="clearfix">
						<li><a id="qprice1">小于30</a></li>
						<li><a id="qprice2">30~50</a></li>
						<li><a id="qprice3">50~100</a></li>
						<li><a id="qprice4">100~1000</a></li>
						<li><a id="qprice5">1000以上</a></li>
					</ul>
				</dd>
			</dl>
				<dl class="screening clearfix">
				<dt>排序方式</dt>
				<dd class="limit"><a id="sort0">默认</a></dd>
				<dd class="screening_list">
					<ul class="clearfix">
						<li><a id="sort1">按时间升序</a></li>
						<li><a id="sort2">按时间降序</a></li>
						<li><a id="sort3">按价格升序</a></li>
						<li><a id="sort4">按价格降序</a></li>
						
					</ul>
				</dd>
			</dl>
		</div>
		<div class="hr_15"></div>
		<div class="addInfo">
			<div class="fl screen_text">
				<span class="shop_number">
					&emsp;&emsp;共&emsp;<em id="shopnumber">0</em>&emsp;本书
				</span>
			</div>
		</div>
		<div class="products_list screening_list_more clearfix" >
			<div class="item" id="box0">
				<div class="item_cont">
					<div class="img_item">
						<a  id="url0"><img src="../static/images/pad.jpg" alt="" id="picture0"></a>
					</div>
					<p><a href="#" id="name0">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author0">作者</p>
					<p class="money" id="price0">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box1">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url1"><img src="../static/images/shopImg.jpg" alt="" id="picture1"></a>
					</div>
					<p><a href="#" id="name1">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author1">作者</p>
					<p class="money" id="price1">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box2">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url2"><img src="../static/images/shopImg.jpg" alt="" id="picture2"></a>
					</div>
					<p><a href="#" id="name2">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author2">作者</p>
					<p class="money" id="price2">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box3">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url3"><img src="../static/images/shopImg.jpg" alt="" id="picture3"></a>
					</div>
					<p><a href="#" id="name3">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author3">作者</p>
					<p class="money" id="price3">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box4">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url4"><img src="../static/images/shopImg.jpg" alt="" id="picture4"></a>
					</div>
					<p><a href="#" id="name4">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author4">作者</p>
					<p class="money" id="price4">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box5">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url5"><img src="../static/images/shopImg.jpg" alt="" id="picture5"></a>
					</div>
					<p><a href="#" id="name5">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author5">作者</p>
					<p class="money" id="price5">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box6">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url6"><img src="../static/images/shopImg.jpg" alt="" id="picture6"></a>
					</div>
					<p><a href="#" id="name6">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author6">作者</p>
					<p class="money" id="price6">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box7">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url7"><img src="../static/images/shopImg.jpg" alt="" id="picture7"></a>
					</div>
					<p><a href="#" id="name7">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author7">作者</p>
					<p class="money" id="price7">￥888</p>
					
				</div>
			</div>
			<div class="item" id="box8">
				<div class="item_cont">
					<div class="img_item">
						<a href="#" id="url8"><img src="../static/images/shopImg.jpg" alt="" id="picture8"></a>
					</div>
					<p><a href="#" id="name8">文字介绍文字介绍文字介绍文字介绍文字介绍文字介绍</a></p>
					<p id="author8">作者</p>
					<p class="money" id="price8">￥888</p>
					
				</div>
			</div>
		</div>
		<div class="hr_25"></div>
		<div class="page">
			<a href="#">上一页</a><a href="#" id="page0">1</a><span class="hl" id="span0">...</span><a href="#" id="page1">2</a><a href="#" id="page2">3</a><a href="#" id="page3">4</a><a href="#" id="page4">5</a><a href="#" id="page5">6</a><span class="hl" id="span1">...</span><a href="#" id="page6">200</a><a href="#">下一页</a><span class="morePage" >共</span><span class="morePage" id="page">200</span><span class="morePage">页</span>，到第<input type="text" class="pageNum"><span class="ye">页</span><input type="button" value="确定" class="page_btn" ">
		</div>
	</div>
</div>
<div class="hr_25"></div>
<div class="footer">
	<p><a href="#">慕课简介</a><i>|</i><a href="#">慕课公告</a><i>|</i> <a href="#">招纳贤士</a><i>|</i><a href="#">联系我们</a><i>|</i>客服热线：400-675-1234</p>
	<p>Copyright &copy; 2006 - 2014 慕课版权所有&nbsp;&nbsp;&nbsp;京ICP备09037834号&nbsp;&nbsp;&nbsp;京ICP证B1034-8373号&nbsp;&nbsp;&nbsp;某市公安局XX分局备案编号：123456789123</p>
	<p class="web"><a href="#"><img src="../static/images/webLogo.jpg" alt="logo"></a><a href="#"><img src="../static/images/webLogo.jpg" alt="logo"></a><a href="#"><img src="../static/images/webLogo.jpg" alt="logo"></a><a href="#"><img src="../static/images/webLogo.jpg" alt="logo"></a></p>
</div>
</body>
</html>
